<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="libs/marked.min"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;0,600;1,400;1,500&family=IBM+Plex+Sans:wght@500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="index.css">
    <title>Gr√ºtziü§ù</title>
</head>
<body>
    <div id="menu">
    </div>
    <div  id="content"></div>
    <script>
        fetch('/content.md')
        .then(content => content.text())
        .then(content => {
            let sites = content.split('------')
            sites.map( site => {
                let wrapper = document.createElement('div')
                let siteArray = site.split('<-images->')
                if(siteArray.length > 1){
                    site = siteArray[0]
                    let images = document.createElement('div')
                    images.classList.add('images')
                    images.innerHTML = siteArray[1]
                    wrapper.appendChild(images)
                }
                //content
                let html = marked.parse(site)
                let div = document.createElement('div')
                div.classList.add('text')
                div.innerHTML = html
                wrapper.prepend(div)

                document.getElementById('content').appendChild(wrapper)
                //menu
                let h1 = div.getElementsByTagName('h1')[0]
                h1.id = h1.innerHTML.toLocaleLowerCase().replaceAll(' ', '-')
                let a = document.createElement('a')
                a.href = '#' + h1.id
                a.innerHTML = h1.innerHTML
                document.getElementById('menu').appendChild(a)

            }) 
            let a = document.createElement('a')
            a.href = '/impressum.html'
            a.innerHTML = 'Impressum'
            document.getElementById('menu').appendChild(a)
        })

        function showMenu(){
            document.getElementById("burgerOpen").style.visibility = "hidden"
            document.getElementById("burgerClose").style.visibility = "visible"
            document.getElementById("menu").style.visibility = "visible"
        }       
        function closeMenu(){
            document.getElementById("burgerClose").style.visibility = "hidden"
            document.getElementById("burgerOpen").style.visibility = "visible"
            document.getElementById("menu").style.visibility = "hidden"
        }
    </script>
    
</body>
</html>